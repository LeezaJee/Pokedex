var pokemonRepository = (function () {
  var t = [];
  document.querySelector("#pokemonModal");
  let e = "https://pokeapi.co/api/v2/pokemon/?limit=150";
  function o(e) {
    if ("object" == typeof e) return t.push(e);
  }
  function n(t) {
    let e = t.detailsUrl;
    return fetch(e)
      .then(function (t) {
        return t.json();
      })
      .then(function (e) {
        return (
          (t.imageUrl = e.sprites.other.dream_world.front_default),
          (t.height = e.height),
          (t.types = e.types),
          t
        );
      })
      .catch(function (t) {
        console.log(t);
      });
  }
  function a(t) {
    let e = $(".modal-body"),
      o = $(".modal-title");
    o.empty(), e.empty();
    let n = $("<h1>" + t.name + "</h1>"),
      a = $('<img class="modal-img" style="width:50%">');
    a.attr("src", t.imageUrl), $(a).addClass("image");
    let l = $("<p>height : " + t.height + "</p>"),
      i = $("<p>types : " + t.types[0].type.name + "</p>");
    o.append(n), e.append(a), e.append(l), e.append(i);
  }
  function l(t) {
    n(t).then(function () {
      a(t);
    });
  }
  return {
    add: o,
    getAll: function () {
      return t;
    },
    addListItem: function (t) {
      let e = document.querySelector(".list-group"),
        o = document.createElement("li"),
        n = document.createElement("button");
      $(o).addClass("list-group-item col-lg-2 col-md-3 col-sm-4"),
        $(n).text(t.name),
        $(n).addClass("btn btn-block pokemon-btn"),
        $(n).attr("type", "button"),
        $(n).attr("data-toggle", "modal"),
        $(n).attr("data-target", "#pokemonModal"),
        $(o).append(n),
        $(e).append(o),
        $(n).on("click", () => {
          l(t);
        });
    },
    loadList: function () {
      return fetch(e)
        .then(function (t) {
          return t.json();
        })
        .then(function (t) {
          t.results.forEach(function (t) {
            var e;
            o({
              name: ((e = t.name), e.charAt(0).toUpperCase() + e.slice(1)),
              detailsUrl: t.url,
            });
          });
        })
        .catch(function (t) {
          console.log(t);
        });
    },
    loadDetails: n,
    showDetails: l,
    showModal: a,
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
